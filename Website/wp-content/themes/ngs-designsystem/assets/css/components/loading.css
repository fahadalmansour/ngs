/**
 * Loading Component
 *
 * Skeleton loaders, spinners, and loading states
 * Uses CSS logical properties for RTL support
 * Depends on: tokens.css (--ngs-* variables)
 */

/* Skeleton */
.ngs-skeleton {
  background: linear-gradient(
    90deg,
    var(--ngs-bg-alt) 0%,
    var(--ngs-border-light) 50%,
    var(--ngs-bg-alt) 100%
  );
  background-size: 200% 100%;
  animation: ngsShimmer 1.5s ease-in-out infinite;
  border-radius: var(--ngs-radius-sm);
  display: block;
}

/* Skeleton Variants */
.ngs-skeleton--text {
  block-size: 16px;
  inline-size: 100%;
  margin-block-end: 12px;
  border-radius: 4px;
}

.ngs-skeleton--text:last-child {
  margin-block-end: 0;
}

.ngs-skeleton--text-short {
  inline-size: 60%;
}

.ngs-skeleton--text-medium {
  inline-size: 80%;
}

.ngs-skeleton--text-long {
  inline-size: 100%;
}

.ngs-skeleton--heading {
  block-size: 28px;
  inline-size: 70%;
  margin-block-end: 16px;
  border-radius: 6px;
}

.ngs-skeleton--title {
  block-size: 32px;
  inline-size: 50%;
  margin-block-end: 24px;
  border-radius: 8px;
}

.ngs-skeleton--image {
  block-size: 288px;
  inline-size: 100%;
  border-radius: var(--ngs-radius-md) var(--ngs-radius-md) 0 0;
}

.ngs-skeleton--avatar {
  block-size: 48px;
  inline-size: 48px;
  border-radius: 50%;
}

.ngs-skeleton--avatar-sm {
  block-size: 32px;
  inline-size: 32px;
}

.ngs-skeleton--avatar-lg {
  block-size: 64px;
  inline-size: 64px;
}

.ngs-skeleton--button {
  block-size: 48px;
  inline-size: 120px;
  border-radius: var(--ngs-radius-sm);
}

.ngs-skeleton--input {
  block-size: 48px;
  inline-size: 100%;
  border-radius: var(--ngs-radius-sm);
}

.ngs-skeleton--badge {
  block-size: 24px;
  inline-size: 80px;
  border-radius: var(--ngs-radius-full);
}

/* Skeleton Card */
.ngs-skeleton-card {
  inline-size: 288px;
  block-size: 480px;
  background: var(--ngs-bg);
  border: 1px solid var(--ngs-border-light);
  border-radius: var(--ngs-radius-md);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.ngs-skeleton-card__image {
  inline-size: 100%;
  block-size: 288px;
  background: linear-gradient(
    90deg,
    var(--ngs-bg-alt) 0%,
    var(--ngs-border-light) 50%,
    var(--ngs-bg-alt) 100%
  );
  background-size: 200% 100%;
  animation: ngsShimmer 1.5s ease-in-out infinite;
  flex-shrink: 0;
}

.ngs-skeleton-card__content {
  padding-block: 24px;
  padding-inline: 24px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
}

.ngs-skeleton-card__line {
  block-size: 16px;
  background: linear-gradient(
    90deg,
    var(--ngs-bg-alt) 0%,
    var(--ngs-border-light) 50%,
    var(--ngs-bg-alt) 100%
  );
  background-size: 200% 100%;
  animation: ngsShimmer 1.5s ease-in-out infinite;
  border-radius: var(--ngs-radius-sm);
}

.ngs-skeleton-card__line--short {
  inline-size: 60%;
}

.ngs-skeleton-card__line--medium {
  inline-size: 80%;
}

.ngs-skeleton-card__line--price {
  block-size: 24px;
  inline-size: 40%;
  margin-block-start: 8px;
}

.ngs-skeleton-card__line--button {
  block-size: 48px;
  inline-size: 100%;
  margin-block-start: auto;
}

/* Skeleton List */
.ngs-skeleton-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.ngs-skeleton-list-item {
  display: flex;
  gap: 16px;
  align-items: center;
}

.ngs-skeleton-list-item__avatar {
  flex-shrink: 0;
}

.ngs-skeleton-list-item__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Skeleton Grid */
.ngs-skeleton-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(288px, 1fr));
  gap: 24px;
}

/* Spinner */
.ngs-spinner {
  inline-size: 24px;
  block-size: 24px;
  border: 3px solid var(--ngs-border-light);
  border-top-color: var(--ngs-primary);
  border-radius: 50%;
  animation: ngsSpin 0.8s linear infinite;
  display: inline-block;
}

/* Spinner Sizes */
.ngs-spinner--sm {
  inline-size: 16px;
  block-size: 16px;
  border-width: 2px;
}

.ngs-spinner--lg {
  inline-size: 32px;
  block-size: 32px;
  border-width: 4px;
}

.ngs-spinner--xl {
  inline-size: 48px;
  block-size: 48px;
  border-width: 5px;
}

/* Spinner Variants */
.ngs-spinner--primary {
  border-top-color: var(--ngs-primary);
}

.ngs-spinner--success {
  border-top-color: var(--ngs-success);
}

.ngs-spinner--error {
  border-top-color: var(--ngs-error);
}

.ngs-spinner--warning {
  border-top-color: var(--ngs-warning);
}

.ngs-spinner--light {
  border-color: rgba(255, 255, 255, 0.3);
  border-top-color: #fff;
}

/* Spinner Center */
.ngs-spinner-center {
  display: flex;
  align-items: center;
  justify-content: center;
  min-block-size: 200px;
}

/* Spinner Overlay */
.ngs-spinner-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.8);
  z-index: 10;
}

.ngs-spinner-overlay--dark {
  background: rgba(0, 0, 0, 0.5);
}

/* Loading State */
.ngs-loading {
  position: relative;
  pointer-events: none;
  opacity: 0.6;
}

.ngs-loading::after {
  content: "";
  position: absolute;
  inset-block-start: 50%;
  inset-inline-start: 50%;
  transform: translate(-50%, -50%);
  inline-size: 24px;
  block-size: 24px;
  border: 3px solid var(--ngs-border-light);
  border-top-color: var(--ngs-primary);
  border-radius: 50%;
  animation: ngsSpin 0.8s linear infinite;
}

/* Pulse Animation */
.ngs-pulse {
  animation: ngsPulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes ngsPulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Progress Bar */
.ngs-progress {
  inline-size: 100%;
  block-size: 8px;
  background: var(--ngs-bg-alt);
  border-radius: var(--ngs-radius-full);
  overflow: hidden;
  position: relative;
}

.ngs-progress__bar {
  block-size: 100%;
  background: var(--ngs-primary);
  border-radius: var(--ngs-radius-full);
  transition: inline-size 300ms ease;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-inline-end: 4px;
  position: relative;
}

.ngs-progress__bar--animated {
  background: linear-gradient(
    90deg,
    var(--ngs-primary) 0%,
    var(--ngs-primary-hover) 50%,
    var(--ngs-primary) 100%
  );
  background-size: 200% 100%;
  animation: ngsProgress 1.5s ease-in-out infinite;
}

.ngs-progress--sm {
  block-size: 4px;
}

.ngs-progress--lg {
  block-size: 12px;
}

/* Indeterminate Progress */
.ngs-progress--indeterminate .ngs-progress__bar {
  inline-size: 30%;
  animation: ngsIndeterminate 1.5s ease-in-out infinite;
}

@keyframes ngsIndeterminate {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(400%);
  }
}

[dir="rtl"] .ngs-progress--indeterminate .ngs-progress__bar {
  animation: ngsIndeterminateRTL 1.5s ease-in-out infinite;
}

@keyframes ngsIndeterminateRTL {
  0% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(-400%);
  }
}

/* Animations */
@keyframes ngsShimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

@keyframes ngsSpin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes ngsProgress {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Dots Loader */
.ngs-dots {
  display: inline-flex;
  gap: 6px;
  align-items: center;
}

.ngs-dots__dot {
  inline-size: 8px;
  block-size: 8px;
  background: var(--ngs-primary);
  border-radius: 50%;
  animation: ngsDotBounce 1.4s ease-in-out infinite;
}

.ngs-dots__dot:nth-child(1) {
  animation-delay: -0.32s;
}

.ngs-dots__dot:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes ngsDotBounce {
  0%,
  80%,
  100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Responsive */
@media (max-width: 767px) {
  .ngs-skeleton-card {
    inline-size: 100%;
    max-inline-size: 320px;
  }

  .ngs-skeleton-grid {
    grid-template-columns: 1fr;
  }
}
